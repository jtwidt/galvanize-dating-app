(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{101:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),o=a.n(c),s=(a(77),a(17)),i=a.n(s),l=a(28),u=a(10),m=a(4),d=a(138),p=a(139),f=a(140),h=a(142),b=a(149),g=function(e){return{root:{backgroundColor:e.palette.background.paper,height:"calc(100% - 35px)",position:"absolute",left:"0",width:"300px",boxShadow:"0px 0px 2px black"},listItem:{cursor:"pointer"},newChatBtn:{borderRadius:"0px"},unreadMessage:{color:"red",position:"absolute",top:"0",right:"5px"}}},x=a(143),v=a(134),w=a(141),E=Object(m.a)(g)((function(e){var t=e.classes,a=function(){e.newChat()};return e.chats.length>0?r.a.createElement("main",{className:t.root},r.a.createElement(v.a,{variant:"contained",fullWidth:!0,color:"primary",className:t.newChatBtn,onClick:a},"New Chat"),r.a.createElement(d.a,null,e.chats.map((function(a,n){var c,o,s,i;c=a.user1_id===e.currentUser?a.user2_id:a.user1_id;var l=e.allUsers.filter((function(e){return e.id===c}));return l.length>0&&(o=l[0].avatar,s=l[0].first_name,i=l[0].last_name),r.a.createElement("div",{key:a.id},r.a.createElement(p.a,{onClick:function(){return t=a.id,void e.selectChat(t);var t},className:t.listItem,selected:e.selectedChat===a.id,alignItems:"flex-start"},r.a.createElement(f.a,null,e.unread.indexOf(a.id)>-1?r.a.createElement(w.a,{color:"primary",variant:"dot"},r.a.createElement(b.a,{alt:"Joe Kerr",src:o})):r.a.createElement(b.a,{alt:"Joe Kerr",src:o})),r.a.createElement(h.a,{primary:"".concat(s," ").concat(i)})),r.a.createElement(x.a,null))})))):r.a.createElement("main",null,r.a.createElement(v.a,{variant:"contained",fullWidth:!0,color:"primary",className:t.newChatBtn,onClick:a},"New Chat"),r.a.createElement(d.a,null))})),O=a(21),j=a.n(O),C=function(e){return{changeUserBtn:{position:"absolute",bottom:"0px",left:"0px",width:"300px",borderRadius:"0px",backgroundColor:"#227092",height:"35px",boxShadow:"0px 0px 2px black",color:"white"}}},S=function(e){return{content:{height:"calc(100vh - 100px)",overflow:"auto",padding:"25px",marginLeft:"300px",boxSizing:"border-box",overflowY:"scroll",top:"50px",width:"calc(100% - 300px)",position:"absolute"},userSent:{float:"left",clear:"both",padding:"20px",boxSizing:"border-box",wordWrap:"break-word",marginTop:"10px",backgroundColor:"#707BC4",color:"white",width:"300px",borderRadius:"10px"},friendSent:{float:"right",clear:"both",padding:"20px",boxSizing:"border-box",wordWrap:"break-word",marginTop:"10px",backgroundColor:"#707BC4",color:"white",width:"300px",borderRadius:"10px"},chatHeader:{width:"calc(100% - 301px)",height:"50px",backgroundColor:"#344195",position:"fixed",marginLeft:"301px",fontSize:"18px",textAlign:"center",color:"white",paddingTop:"10px",boxSizing:"border-box"}}},k=Object(m.a)(S)((function(e){var t=e.classes,a=e.selectedChat,c=e.currentUser,o=e.allUsers;if(Object(n.useEffect)((function(){var e=document.getElementById("chatview-container");e&&e.scrollTo(0,e.scrollHeight)})),null!==a){var s=a[0].sender===c?a[0].reciever:a[0].sender;return r.a.createElement("div",null,r.a.createElement("div",{className:t.chatHeader},"Your conversation with"," ",o.filter((function(e){return e.id===s}))[0].first_name," ",o.filter((function(e){return e.id===s}))[0].last_name),r.a.createElement("main",{id:"chatview-container",className:t.content},a.map((function(e){return r.a.createElement("div",{key:e.msgid,className:e.sender===c?t.userSent:t.friendSent},e.message)}))))}return r.a.createElement("main",{className:t.content,id:"chatview-container"})})),y=a(148),N=a(62),U=a.n(N),B=function(e){return{sendBtn:{color:"blue",cursor:"pointer","&:hover":{color:"gray"}},chatTextBoxContainer:{position:"absolute",bottom:"15px",left:"315px",boxSizing:"border-box",overflow:"auto",width:"calc(100% - 300px - 50px)"},chatTextBox:{width:"calc(100% - 75px)"}}},T=Object(m.a)(B)((function(e){var t=e.classes,a=Object(n.useState)(""),c=Object(u.a)(a,2),o=c[0],s=c[1],i=function(){if(l(o)){var t=e.selectedChat[0].sender===e.currentUser?e.selectedChat[0].reciever:e.selectedChat[0].sender;e.submitMsg(o,t),document.getElementById("chattextbox").value=""}},l=function(e){return e&&e.replace(/\s/g,"").length};return r.a.createElement("div",{className:t.chatTextBoxContainer},r.a.createElement(y.a,{placeholder:"Type your message...",onKeyUp:function(e){return function(e){13===e.keyCode?i():s(e.target.value)}(e)},id:"chattextbox",className:t.chatTextBox,onFocus:function(){e.messageRead()}}),r.a.createElement(U.a,{onClick:i,className:t.sendBtn}))})),_=a(147),W=a(146),R=a(41),L=a(145),z=a(150),I=a(144),M=a(63),A=function(e){return{main:Object(M.a)({width:"auto",display:"block",marginLeft:3*e.spacing(),marginRight:3*e.spacing()},e.breakpoints.up(400+3*e.spacing()*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{padding:"".concat(2*e.spacing(),"px ").concat(3*e.spacing(),"px ").concat(3*e.spacing(),"px"),position:"absolute",width:"350px",top:"50px",left:"calc(50% + 150px - 175px)"},input:{},form:{width:"100%",marginTop:e.spacing()},submit:{marginTop:3*e.spacing()},errorText:{color:"red",textAlign:"center"}}},F=Object(m.a)(A)((function(e){var t=e.classes,a=Object(n.useState)(null),c=Object(u.a)(a,2),o=c[0],s=c[1],m=Object(n.useState)(null),d=Object(u.a)(m,2),p=d[0],f=d[1],h=function(e,t){switch(e){case"username":s(t.target.value);break;case"message":f(t.target.value)}},b=function(){var e=Object(l.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),null!==(a=w())&&(null===(n=E(a))?g(a):x(n,a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(t){e.submitNewChat({sender:e.currentUser,reciever:t,message:p})},x=function(t,a){e.goToChat(t,a,p)},w=function(){var t=null;return e.allUsers.forEach((function(e){"".concat(e.first_name," ").concat(e.last_name).toLowerCase()===o.toLowerCase()&&(t=e.id)})),t},E=function(t){var a=null;return e.chats.forEach((function(e){e.user1_id!==t&&e.user2_id!==t||(a=e.id)})),a};return r.a.createElement("main",{className:t.main},r.a.createElement(_.a,null),r.a.createElement(W.a,{className:t.paper},r.a.createElement(R.a,{component:"h1",variant:"h5"},"Send A Message!"),r.a.createElement("form",{className:t.form,onSubmit:function(e){return b(e)}},r.a.createElement(L.a,{fullWidth:!0},r.a.createElement(z.a,{htmlFor:"new-chat-username"},"Enter the name to message"),r.a.createElement(I.a,{required:!0,className:t.input,autoFocus:!0,onChange:function(e){return h("username",e)},id:"new-chat-username"})),r.a.createElement(L.a,{fullWidth:!0},r.a.createElement(z.a,{htmlFor:"new-chat-message"},"Enter your message"),r.a.createElement(I.a,{required:!0,className:t.input,onChange:function(e){return h("message",e)},id:"new-chat-message"})),r.a.createElement(v.a,{fullWidth:!0,className:t.submit,variant:"contained",color:"primary",type:"submit"},"Submit"))))})),J=Object(m.a)(C)((function(e){var t=Object(n.useState)(null),a=Object(u.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)([]),m=Object(u.a)(s,2),d=m[0],p=m[1],f=Object(n.useState)(1),h=Object(u.a)(f,2),b=h[0],g=h[1],x=Object(n.useState)([]),w=Object(u.a)(x,2),O=w[0],C=w[1],S=Object(n.useState)(!1),y=Object(u.a)(S,2),N=y[0],U=y[1],B=Object(n.useState)(null),_=Object(u.a)(B,2),W=_[0],R=_[1],L=Object(n.useState)(null),z=Object(u.a)(L,2),I=z[0],M=z[1],A=Object(n.useState)(!0),J=Object(u.a)(A,2),H=J[0],K=J[1],q=Object(n.useState)([]),Y=Object(u.a)(q,2),D=Y[0],$=Y[1],G=Object(n.useState)(!0),P=Object(u.a)(G,2),Q=P[0],V=P[1],X=Object(n.useState)(!0),Z=Object(u.a)(X,2),ee=Z[0],te=Z[1],ae=Object(n.useState)({}),ne=Object(u.a)(ae,2),re=ne[0],ce=ne[1],oe=function(e){o(e),te(!0),K(!0),se()},se=function(){null!==c&&function(){if(null!==W)return W[W.length-1].reciever===b}()&&j.a.put("/api/messages/".concat(c,"/").concat(b),null),V(!0)},ie=function(e,t){M({sender:b,reciever:t,message:e})};Object(n.useEffect)((function(){!0===ee&&function(){var e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/api/messageList/".concat(b));case 2:return t=e.sent,p(t.data),e.next=6,j.a.get("/users");case 6:a=e.sent,C(a.data);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[b],[ee]),Object(n.useEffect)((function(){null!==c&&!0===H&&(function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/api/messages/".concat(c));case 2:t=e.sent,R(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),K(!1))}),[c,H]),Object(n.useEffect)((function(){null!==I&&(j.a.post("/api/messages/".concat(c),I),M(null),K(!0))}),[I]),Object(n.useEffect)((function(){var e;null!==re&&j.a.post("/api/messages/",re).then((function(t){e=t.data,ce(null),oe(e)}))}),[re]),Object(n.useEffect)((function(){!0===Q&&(function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/api/unread/".concat(b));case 2:t=e.sent,$(t.data.map((function(e){return e.conversation_id})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),V(!1))}),[Q]);var le=e.classes;return O===[]&&d===[]?null:r.a.createElement("div",null,r.a.createElement(E,{selectChat:oe,chats:d,selectedChat:c,currentUser:b,allUsers:O,unread:D,newChat:function(){U(!0),o(null),R(null)}}),N?null:r.a.createElement(k,{currentUser:b,selectedChat:W,allUsers:O}),null===W||N?null:r.a.createElement(T,{submitMsg:ie,messageRead:se,currentUser:b,selectedChat:W}),N?r.a.createElement(F,{allUsers:O,chats:d,currentUser:b,submitNewChat:function(e){ce(e),te(!0),U(!1)},goToChat:function(e,t,a){o(e),ie(a,t),U(!1)}}):null,r.a.createElement(v.a,{variant:"contained",color:"primary",onClick:function(e){g(1===b?5:1),R(null),o(null),te(!0),K(!0),$([]),V(!0)},className:le.changeUserBtn},"Change User"))}));var H=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(J,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},72:function(e,t,a){e.exports=a(101)},77:function(e,t,a){}},[[72,1,2]]]);
//# sourceMappingURL=main.3c06b5c1.chunk.js.map